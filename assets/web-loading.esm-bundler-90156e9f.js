var c;(function(o){o.DOM="dom",o.FULL="full",o.MINI="mini"})(c||(c={}));var E;(function(o){o.GEAR="Gear",o.RING="Ring",o.ZOOM="Zoom",o.PATTERN="Pattern",o.CLOCK="Clock",o.BEAN="Bean",o.ROLL="Roll",o.CIRCULAR="Circular",o.IMG="Img",o.SKELETON="Skeleton"})(E||(E={}));function b(){return{custom:null,html:"",type:c.DOM,extendClass:"extend",model:E.GEAR,text:"加载中...",textGap:8,fontSize:12,fontFamily:"Microsoft YaHei",delay:65,notFeel:0,delayInto:320,optimization:!1,zIndex:"2001",themeColor:"rgba(64,158,255,1)",bgColor:"rgba(0, 0, 0, 0.8)",shadowColor:"rgba(64,158,255,0.6)",shadowOffsetX:2,shadowOffsetY:2,shadowBlur:5,pointerEvents:!1,toast:!0}}var w;(function(o){o.BEFORE_CLOSE="beforeClose",o.CLOSED="closed"})(w||(w={}));var y;(function(o){o[o.INFO=1]="INFO",o[o.WARN=2]="WARN",o[o.ERROR=3]="ERROR"})(y||(y={}));var C=function(){function o(){}return o.info=function(e){this.call(e,y.INFO)},o.warn=function(e){this.call(e,y.WARN)},o.error=function(e){this.call(e,y.ERROR)},o.call=function(e,t,i){t===void 0&&(t=y.INFO),i===void 0&&(i={color:b().themeColor,bgColor:b().bgColor});var n=i.bgColor;t===2&&(n="#fffbe5"),t===3&&(n="#fff0f0");var s=`
      background:`.concat(n,`;
      font-size:14px;
      color:`).concat(i.color,`;
      padding: 4px;
      border: 1px solid;`);console.log("%c web-loading:".concat(e," "),s)},o}();function f(o){switch(O(o)){case"object":return Object.keys(o).length>0;case"array":return o.length>0;case"undefined":return o!==void 0;case"null":return o!==null;default:return o!==void 0}}function H(o){window.requestAnimationFrame?window.cancelAnimationFrame(o):window.clearInterval(o)}function O(o){try{var e=Object.prototype.toString.call(o),t=e.split(" ")[1],i=t.split("]")[0];return i.toLowerCase()}catch{return"not-type"}}function F(o,e){var t=null,i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in i)if(o.style[n]!==void 0){t=i[n];break}if(!t)e();else{var s=function(){e(),o.removeEventListener(t,s)};o.addEventListener(t,s)}}function X(){var o=String(Date.now());return window.crypto&&window.crypto.randomUUID&&(o=window.crypto.randomUUID()),"wl_"+o.replace(/-/g,"")}var g;(function(o){o.SCALE="scale",o.WAVE="wave",o.HEIGHT="height"})(g||(g={}));var p;(function(o){o.RECT="rect",o.ARC="arc",o.TRIANGLE="triangle",o.HEART="heart",o.POLYGON="polygon"})(p||(p={}));var S;(function(o){o.RECT="rect",o.WHEEL="wheel",o.WINDMILL="windmill"})(S||(S={}));var P;(function(o){o.COLLISION="collision",o.ROTATE="rotate"})(P||(P={}));var u=function(){function o(e,t,i,n,s,r,a,h){this.modelDefOptions=void 0,this.limits=void 0,this.modelDefCall=void 0,this.webLog=C,this.stepClear=1,this.w=e,this.h=t,this.canvas=i,this.ctx=i.getContext("2d"),this.options=n,this.element=s,this.initContextCall(r,a,h)}return o.prototype._$initBaseContext=function(){this.clearRect(),this.ctx.resetTransform();var e=this.options,t=this.canvas.width,i=this.canvas.height;this.ctx.fillStyle=e.themeColor,this.ctx.strokeStyle=e.themeColor,this.ctx.shadowColor=e.shadowColor,this.ctx.font="".concat(e.fontSize,"px ").concat(e.fontFamily," small-caps"),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.translate(t/2,i/2);var n=window.devicePixelRatio||1;this.ctx.scale(n,n),this.ctx.save()},o.prototype._$initEvent=function(){var e=this;this.element.$store.hookCall.beforeClose(function(){e.clearRect()})},o.prototype._$animationFrame=function(e){var t=this;window.requestAnimationFrame||(this.element.$store.animationId=window.setInterval(e,this.options.delay));var i=Date.now()+this.options.delay;e.call(this);var n=function(){Date.now()>i&&(e.call(t),i=Date.now()+t.options.delay),t.element.$store.animationId=window.requestAnimationFrame(n)};this.element.$store.animationId=window.requestAnimationFrame(n)},o.prototype.initContextCall=function(e,t,i){var n=this;this._$initBaseContext(),this._$initEvent(),f(e)&&(this.modelDefOptions=e,this.options=Object.assign(e,this.options),this.element.$store.options=this.options,t&&t.length&&this.options.toast&&t.forEach(function(s){var r=n.options[s.key];f(r)&&!s.limit(r)&&C.warn(s.message)})),f(t)&&(this.limits=t),f(i)&&i.call(this,this)},o.prototype.run=function(e){this.element.$store.animationId&&this.clearAnimationFrame(this.element.$store.animationId),this._$animationFrame(e)},o.prototype.clearAnimationFrame=function(e){H(e)},o.prototype.clearRect=function(e,t,i,n){var s=this.canvas.width,r=this.canvas.height;if(f(e)&&f(t)&&f(i)&&f(n))this.ctx.clearRect(e,t,i,n);else if(f(e)&&f(t)&&f(i)&&!f(n)){var a=i-this.stepClear,h=Math.sqrt(i*i-a*a),l=e-a,x=t-h,d=2*a,m=2*h;this.stepClear<=i?(this.ctx.clearRect(l,x,d,m),this.stepClear+=1,this.clearRect(e,t,i)):this.stepClear=1}else this.ctx.clearRect(-s,-r,s*2,r*2)},o.prototype.drawRadiusRect=function(e,t,i,n,s){this.ctx.beginPath(),this.ctx.arc(e+s,t+s,s,1*Math.PI,1.5*Math.PI),this.ctx.lineTo(e+i-s,t),this.ctx.arc(e+i-s,t+s,s,1.5*Math.PI,0),this.ctx.lineTo(e+i,t+n-s),this.ctx.arc(e+i-s,t+n-s,s,0,.5*Math.PI),this.ctx.lineTo(e+s,t+n),this.ctx.arc(e+s,t+n-s,s,.5*Math.PI,Math.PI),this.ctx.lineTo(e,t+s),this.ctx.closePath()},o.prototype.drawText=function(e){var t=this.options,i=Object.assign({esGap:t.textGap||0,x:0,text:t.text||"",textColor:t.themeColor||"rgba(64,158,255,1)"},e);this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle=i.textColor,this.ctx.fillText(i.text,i.x,(t.textGap||0)+(t.fontSize||0)+i.esGap),this.ctx.closePath(),this.ctx.restore()},o}(),T=function(o,e){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},T(o,e)};function v(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");T(o,e);function t(){this.constructor=o}o.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var q={lineStart:10,lineEnd:16,lineStartSkew:0,lineEndSkew:0,lineWidth:4,lineCap:"round",lineNum:10,direction:!0},Y=[{key:"lineNum",message:"lineNum value 4-18",limit:function(o){return o>=4&&o<=18}}],Z=function(o){v(e,o);function e(t,i,n,s,r){var a=o.call(this,t,i,n,s,r,q,Y,function(h){var l=h.options;h.ctx.lineCap=l.lineCap,h.ctx.lineWidth=l.lineWidth,h.ctx.save()})||this;return a.optimization(a.options.textGap+a.options.lineEnd),a.aps=Array.from({length:a.options.lineNum},function(h,l){return l}),a.run(a.draw),a}return e.prototype.draw=function(){this.clearRect(),this.controller(),this.drawGear();var t=this.options;this.drawText({esGap:t.lineEnd})},e.prototype.controller=function(){var t=this,i=this.options;i.direction?this.aps=this.aps.map(function(n){return n-1<=0?t.aps.length-1:n-1}):this.aps=this.aps.map(function(n){return n+1>t.aps.length?0:n+1})},e.prototype.drawGear=function(){var t=this.options;this.ctx.save(),this.ctx.shadowOffsetX=t.shadowOffsetX,this.ctx.shadowOffsetY=t.shadowOffsetY,this.ctx.shadowBlur=t.shadowBlur;for(var i=0;i<this.aps.length;i++)this.ctx.beginPath(),this.ctx.globalAlpha=this.aps[i]/10,this.ctx.moveTo(t.lineEndSkew,t.lineStart),this.ctx.lineTo(t.lineStartSkew,t.lineEnd),this.ctx.stroke(),this.ctx.closePath(),this.ctx.rotate(2*Math.PI/t.lineNum);this.ctx.restore()},e.prototype.optimization=function(t){this.options.optimization&&t*4>this.h&&(this.options.lineStart=this.h/6-5,this.options.lineEnd=this.h/6,this.options.textGap=2)},e}(u),L={zoomGap:10,maxSize:16,zoomNum:5,lineWidth:10,zoomHeight:2,lineCap:"round",action:g.SCALE,direction:!0,zoomColors:[]},K=[{key:"lineWidth",message:"lineWidth(default:10) <=  maxSize(default:16)",limit:function(o){return o<=L.maxSize}},{key:"maxSize",message:"lineWidth(default:10) <=  maxSize(default:16)",limit:function(o){return L.lineWidth<=o}}],V=function(o){v(e,o);function e(t,i,n,s,r){var a=o.call(this,t,i,n,s,r,L,K,function(h){var l=h.options;h.ctx.lineCap=l.lineCap,h.ctx.lineWidth=l.lineWidth,h.ctx.translate(-(l.lineWidth*(l.zoomNum+1)+l.zoomGap*(l.zoomNum+1))/2,-l.zoomHeight/2),h.ctx.save()})||this;return a.zoomIndex=a.options.direction?0:a.options.zoomNum-1,a.list=Array.from({length:a.options.zoomNum},function(h,l){return Object.assign({value:a.options.lineWidth,state:0})}),a.run(a.draw),a}return e.prototype.draw=function(){this.clearRect(),this.drawZoom();var t=this.options;this.drawText({esGap:t.maxSize,x:(t.lineWidth*(t.zoomNum+1)+t.zoomGap*(t.zoomNum+1))/2}),this.controller()},e.prototype.controller=function(){var t=this.options;t.direction&&this.zoomIndex>=t.zoomNum?this.zoomIndex=0:t.direction&&this.zoomIndex<0&&(this.zoomIndex=t.zoomNum-1)},e.prototype.drawZoom=function(){for(var t=this.options,i=0;i<t.zoomNum;i++){this.list[i].state===1?this.list[i].value+=2:this.list[i].state===2&&this.list[i].value>=t.lineWidth&&this.list[i].value--,t.action===g.SCALE&&(this.ctx.lineWidth=this.list[i].value),i===this.zoomIndex&&(this.list[i].value>t.maxSize&&(this.list[i].state=2,t.direction?this.zoomIndex++:this.zoomIndex-1>=0?this.zoomIndex--:this.zoomIndex=t.zoomNum-1),this.list[i].value<=t.lineWidth&&(this.list[i].state=1)),this.ctx.beginPath(),t.zoomColors.length>0&&t.zoomColors[i]?this.ctx.strokeStyle=t.zoomColors[i]:this.ctx.strokeStyle=t.themeColor;var n=0,s=t.zoomHeight;(t.action===g.HEIGHT||t.action===g.WAVE)&&(n=-this.list[i].value),t.action===g.WAVE&&(s=-this.list[i].value),this.ctx.moveTo((i+1)*(t.lineWidth+t.zoomGap),n),this.ctx.lineTo((i+1)*(t.lineWidth+t.zoomGap),s),this.ctx.stroke(),this.ctx.closePath()}},e}(u),G={arcGap:Math.PI/4,ringGap:10,lineWidth:2,ringNum:2,radius:6,lineCap:"round",turn:10,ringsTurn:[Math.PI,Math.PI/4],direction:!0},J=[{key:"ringNum",message:"ringNum value 1-10",limit:function(o){return o>=1&&o<=10}},{key:"ringsTurn",message:"ringsTurn size ".concat(G.ringNum),limit:function(o){return o.length<=G.ringNum}}],Q=function(o){v(e,o);function e(t,i,n,s,r){var a=o.call(this,t,i,n,s,r,G,J,function(h){var l=h.options;h.ctx.lineCap=l.lineCap,h.ctx.lineWidth=l.lineWidth,h.ctx.save()})||this;return a.rotate=10,a.run(a.draw),a}return e.prototype.draw=function(){this.clearRect(),this.controller();var t=this.options;this.drawText({esGap:t.ringNum*(t.radius+t.ringGap/2)})},e.prototype.controller=function(){this.ctx.save();var t=this.options,i=this.rotate*Math.PI/180*(t.direction?1:-1);this.ctx.rotate(i),this.ctx.shadowOffsetX=t.shadowOffsetX,this.ctx.shadowOffsetY=t.shadowOffsetY,this.ctx.shadowBlur=t.shadowBlur;for(var n=1;n<=t.ringNum;n++)this.drawRing(t.radius+(n-1)*t.ringGap,t.arcGap,t.ringsTurn&&t.ringsTurn.length>0?t.ringsTurn[n-1]:Math.PI/n);this.rotate+=t.turn,this.ctx.restore()},e.prototype.drawRing=function(t,i,n){i===void 0&&(i=1),n===void 0&&(n=0),this.ctx.beginPath(),this.ctx.arc(0,0,t,i+n,Math.PI+n),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.arc(0,0,t,Math.PI+i+n,n),this.ctx.stroke(),this.ctx.closePath()},e}(u),tt={beanSize:15,pointLength:15},it=[{key:"pointLength",message:"pointLength value >= 5",limit:function(o){return o>=5}},{key:"beanSize",message:"beanSize value >= 5",limit:function(o){return o>=5}}],et=function(o){v(e,o);function e(t,i,n,s,r){var a=o.call(this,t,i,n,s,r,tt,it)||this;return a.bean={turn:30,state:1,beanState:1,nowX:-(a.options.pointLength*a.options.beanSize)/2-a.options.beanSize*3,beans:Array.from({length:a.options.pointLength},function(){return 1}),beanAnimaIndex:0},a.options.delay=10,a.run(a.draw),a}return e.prototype.draw=function(){var t=this.options;this.clearRect(),this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(this.bean.nowX,0),this.ctx.arc(0,0,t.beanSize,(360-this.bean.turn)*Math.PI/180,this.bean.turn*Math.PI/180,!0),this.ctx.lineTo(0,0),this.ctx.fill(),this.ctx.closePath(),this.ctx.restore(),this.drawPoint(),this.drawFilter(),this.drawText({esGap:t.beanSize}),this.controller()},e.prototype.controller=function(){var t=this.options;this.bean.nowX>=t.pointLength*t.beanSize/2+t.beanSize*2&&(this.bean.nowX=-(t.pointLength*t.beanSize)/2-t.beanSize*3,this.bean.beanAnimaIndex=0),this.bean.nowX<=-(t.pointLength*t.beanSize)/2&&(this.bean.beanState=2),this.bean.turn<=0&&(this.bean.state=2),this.bean.turn>=30&&(this.bean.state=1),this.bean.state===1&&(this.bean.turn-=1),this.bean.state===2&&(this.bean.turn+=1),this.bean.beanState===1&&(this.bean.nowX-=1),this.bean.beanState===2&&(this.bean.nowX+=1)},e.prototype.drawPoint=function(){var t=this.options;this.ctx.save(),this.setShadow(),this.ctx.translate(-(t.pointLength*t.beanSize)/2,0);for(var i=0;i<t.pointLength&&i<this.bean.beanAnimaIndex;i++)this.ctx.beginPath(),i<this.bean.beanAnimaIndex&&this.ctx.arc(t.beanSize*i,0,t.beanSize/4,0,Math.PI*2),this.ctx.fill(),this.ctx.closePath();this.bean.beanAnimaIndex+=.2,this.ctx.restore()},e.prototype.drawFilter=function(){var t=this.options;this.clearRect(-t.beanSize/3+this.bean.nowX,-t.beanSize/2,t.beanSize/4),this.clearRect(-(t.pointLength*t.beanSize)/2-t.beanSize/2+.2,-this.h,this.bean.nowX+t.pointLength*t.beanSize/2-t.beanSize/2,this.h*2),this.clearRect(-(t.pointLength*t.beanSize)/2,-this.h,-180,this.h*2),this.clearRect(t.pointLength*t.beanSize/2,-this.h,180,this.h*2)},e.prototype.setShadow=function(){var t=this.options;this.ctx.shadowOffsetX=t.shadowOffsetX,this.ctx.shadowOffsetY=t.shadowOffsetY,this.ctx.shadowBlur=t.shadowBlur},e}(u),ot={lineCap:"round",lineWidth:2,lineColors:["#d4d4d4","#06ab2d","#8a0303"],clockSize:15,clockGap:4,hLine:!0,mLine:!1,sLine:!0,textTime:""},nt=[{key:"lineColors",message:"lineColors.length <= 3",limit:function(o){return o.length<=3}}],st=function(o){v(e,o);function e(t,i,n,s,r){var a=o.call(this,t,i,n,s,r,ot,nt,function(h){var l=h.options;h.ctx.lineCap=l.lineCap,h.ctx.lineWidth=l.lineWidth,h.ctx.save()})||this;return a.nowTime=-1,a.nowS=0,a.run(a.draw),a}return e.prototype.draw=function(){this.clearRect(),this.drawClock()},e.prototype.drawClock=function(){var t=this.options,i=new Date().getSeconds(),n=new Date().getMinutes(),s=new Date().getHours();this.ctx.save(),this.ctx.beginPath(),this.setShadow(),this.ctx.moveTo(-5,-(t.clockSize+t.clockGap)),this.ctx.lineTo(5,-(t.clockSize+t.clockGap)),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.setShadow(),this.ctx.arc(0,0,t.clockSize,0,Math.PI*2),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore(),this.ctx.save();for(var r=0;r<12;r++)this.ctx.beginPath(),this.ctx.rotate(360/12*Math.PI/180),this.ctx.moveTo(t.clockSize-t.clockGap,0),this.ctx.lineTo(t.clockSize-t.clockGap,0),this.ctx.stroke(),this.ctx.closePath();this.ctx.restore(),t.hLine&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.lineWidth=t.lineWidth*1.6,t.lineColors[0]&&(this.ctx.strokeStyle=t.lineColors[0]),this.ctx.rotate(-90*Math.PI/180),this.ctx.rotate(s*360/60*Math.PI/180),this.ctx.moveTo(-1,0),this.ctx.lineTo(t.clockSize/2,0),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()),t.mLine&&(this.ctx.save(),this.ctx.beginPath(),t.lineColors[1]&&(this.ctx.strokeStyle=t.lineColors[1]),this.ctx.lineWidth=t.lineWidth*1.2,this.ctx.rotate(-90*Math.PI/180),this.ctx.rotate(n*360/60*Math.PI/180),this.ctx.moveTo(-1,0),this.ctx.lineTo(t.clockSize/2+t.clockGap,0),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()),t.sLine&&(this.ctx.save(),this.ctx.beginPath(),t.lineColors[2]&&(this.ctx.strokeStyle=t.lineColors[2]),this.ctx.rotate(-90*Math.PI/180),this.ctx.rotate(i*360/60*Math.PI/180),this.ctx.moveTo(-1,0),this.ctx.lineTo(t.clockSize-t.clockGap,0),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore(),this.nowS!==i&&this.nowTime++,this.nowS=i),t.textTime==="time"&&(t.text="".concat(s," : ").concat(n," : ").concat(i)),t.textTime==="s"&&(t.text=this.nowTime+"s"),this.drawText({esGap:t.clockSize*2})},e.prototype.setShadow=function(){var t=this.options;this.ctx.shadowOffsetX=t.shadowOffsetX,this.ctx.shadowOffsetY=t.shadowOffsetY,this.ctx.shadowBlur=t.shadowBlur},e}(u),at={charts:[p.ARC,p.RECT,p.TRIANGLE,p.HEART,p.POLYGON],chartColors:["#409EFF","#67C23A","#E6A23C","#F56C6C","#0960bd"],maxHeight:60,chartSize:12},rt=[{key:"chartSize",message:"chartSize value 5-24",limit:function(o){return o>=5&&o<=24}},{key:"delay",message:"Pattern.delay not allowed update",limit:function(o){return o===b().delay}}],ht=function(o){v(e,o);function e(t,i,n,s,r){var a=o.call(this,t,i,n,s,r,at,rt,function(h){h.options.delay=10})||this;return a.pattern={color:a.randomState("chartColors"),nowHeight:10,chart:a.randomState("charts"),shadow:0,nowState:1,turn:0},a.run(a.draw),a}return e.prototype.draw=function(){var t=this.options;this.clearRect(),this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(0,this.pattern.nowHeight),this.ctx.rotate(this.pattern.turn/Math.PI*2),this.ctx.fillStyle=this.pattern.color,this.selectChart(0,0,t.chartSize),this.ctx.closePath(),this.ctx.restore(),this.drawShadow(),this.clearRect(-this.w,0,this.w*2,this.h),this.controller(t),this.drawText({textColor:this.pattern.color})},e.prototype.controller=function(t){this.pattern.turn+=10,this.pattern.nowState===1?(this.pattern.nowHeight--,this.pattern.shadow+=.2):this.pattern.nowState===2&&(this.pattern.nowHeight++,this.pattern.shadow-=.2),this.pattern.shadow=Math.floor(this.pattern.shadow*100)/100,this.pattern.nowHeight<=-t.chartSize&&this.pattern.nowHeight%8==0&&(t.delay+=.5,t.delay=Math.floor(t.delay*100)/100),this.pattern.nowHeight<=-t.maxHeight?this.pattern.nowState=2:this.pattern.nowHeight>=t.chartSize&&(this.pattern.nowState=1,t.delay=10,this.pattern.chart=this.randomState("charts"),this.pattern.color=this.randomState("chartColors"))},e.prototype.selectChart=function(t,i,n){switch(this.pattern.chart){case p.RECT:this.drawRect(t,i,n);break;case p.ARC:this.drawArc(t,i,n);break;case p.TRIANGLE:this.drawTriangle(t,i,n);break;case p.HEART:this.drawHeart(t,i,n);break;case p.POLYGON:this.drawPolygon(t,i,n);break}},e.prototype.randomState=function(t){var i=this.options;return i[t][parseInt(String(Math.random()*i[t].length))]},e.prototype.drawShadow=function(){this.ctx.save(),this.ctx.beginPath(),this.setShadow(),this.ctx.globalAlpha=.2,this.ctx.strokeStyle=this.pattern.color,this.ctx.moveTo(-this.pattern.shadow/2,0),this.ctx.lineTo(this.pattern.shadow,0),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.restore()},e.prototype.drawRect=function(t,i,n){this.ctx.save(),this.ctx.beginPath(),this.setShadow(),this.ctx.translate(-n/2,-n/2),this.ctx.fillRect(t,i,n,n),this.ctx.closePath(),this.ctx.restore()},e.prototype.drawArc=function(t,i,n){this.ctx.save(),this.ctx.beginPath(),this.setShadow(),this.ctx.arc(t,i,n/2,0,Math.PI*2),this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()},e.prototype.drawTriangle=function(t,i,n){this.ctx.save(),this.ctx.beginPath(),this.setShadow(),this.ctx.translate(-n/2,-(n/2*Math.sqrt(3))/2),this.ctx.moveTo(t,i),this.ctx.lineTo(n,0),this.ctx.lineTo(n/2,n/2*Math.sqrt(3)),this.ctx.lineTo(t,i),this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()},e.prototype.drawHeart=function(t,i,n){n=n/2,this.ctx.save(),this.ctx.beginPath(),this.setShadow(),this.ctx.translate(0,-(n*2)/2),this.ctx.moveTo(t,i),this.ctx.bezierCurveTo(n/2,-n,n*3,-n/2,i,n*2),this.ctx.moveTo(t,i),this.ctx.bezierCurveTo(-n/2,-n,-n*3,-n/2,i,n*2),this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()},e.prototype.drawPolygon=function(t,i,n){this.ctx.save(),this.ctx.beginPath(),this.setShadow(),this.ctx.translate(-n/2,-n/2),this.ctx.moveTo(t,i),this.ctx.lineTo(n,i),this.ctx.lineTo(n+n/2,n/2),this.ctx.lineTo(n,n/2+n/2),this.ctx.lineTo(t,n),this.ctx.lineTo(t-n/2,n-n/2),this.ctx.lineTo(t,i),this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()},e.prototype.setShadow=function(){var t=this.options;this.ctx.shadowColor=this.pattern.color,this.ctx.shadowOffsetX=t.shadowOffsetX,this.ctx.shadowOffsetY=t.shadowOffsetY,this.ctx.shadowBlur=t.shadowBlur},e}(u),lt={rollGap:12,childNum:4,rollSize:16,showChild:!0,chart:S.WHEEL,windmills:["#1ab3ea","#de6834","#30925d","#f48ea5"],windmillPointColor:"#f2c31f",fixed:!1},ct=[{key:"childNum",message:"chartSize value 4-10",limit:function(o){return o>=4&&o<=10}},{key:"delay",message:"Roll.delay not allowed update",limit:function(o){return o===b().delay}}],dt=function(o){v(e,o);function e(t,i,n,s,r){var a=o.call(this,t,i,n,s,r,lt,ct)||this;return a.Roll={turn:1,nowX:a.options.fixed?0:a.options.childNum/2*(a.options.rollSize+a.options.rollGap)+a.options.rollGap/2,state:2,child:[]},a.run(a.draw),a}return e.prototype.draw=function(){this.clearRect(),this.drawGround(),this.drawChild(),this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(-this.Roll.nowX,0),this.ctx.rotate(this.Roll.turn*Math.PI/180),this.selectChart(),this.controller(),this.ctx.restore();var t=this.options;this.drawText({esGap:t.rollSize})},e.prototype.selectChart=function(){var t=this.options;switch(t.chart){case S.RECT:this.drawRect();break;case S.WHEEL:this.drawWheel();break;case S.WINDMILL:this.drawWindmill();break}},e.prototype.controller=function(){var t=this.options;if(this.Roll.state===1&&(this.Roll.turn-=10,t.delay<20&&!t.fixed&&(t.delay+=2)),this.Roll.state===2&&(this.Roll.turn+=10,t.delay>10&&!t.fixed&&(t.delay-=5)),!t.fixed){this.Roll.nowX<=-(t.childNum/2)*(t.rollSize+t.rollGap/1.6)&&(this.Roll.state=1),this.Roll.nowX>=t.childNum/2*(t.rollSize+t.rollGap)+t.rollGap/2&&(this.Roll.state=2),this.Roll.state===1&&this.Roll.nowX++,this.Roll.state===2&&this.Roll.nowX--;var i=this.Roll.child;this.Roll.nowX%(t.rollSize+t.rollGap)==0&&this.Roll.state===2&&i.push({turn:this.Roll.turn,x:this.Roll.nowX}),this.Roll.state===1&&i[i.length-1]&&i[i.length-1].x===this.Roll.nowX&&this.Roll.child.pop()}},e.prototype.drawRect=function(){var t=this.options;this.ctx.save(),this.setShadow(),this.ctx.translate(-t.rollSize/2,-t.rollSize/2),this.ctx.fillRect(0,0,t.rollSize,t.rollSize),this.ctx.restore()},e.prototype.drawWheel=function(){var t=this.options;this.ctx.save(),this.ctx.lineWidth=4,this.ctx.beginPath(),this.ctx.arc(0,0,t.rollSize/6,0,Math.PI*2),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.arc(0,0,t.rollSize/2,0,Math.PI*2),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.arc(0,0,t.rollSize,0,Math.PI*2),this.ctx.stroke(),this.ctx.closePath();for(var i=0;i<6;i++)this.ctx.beginPath(),this.ctx.moveTo(0,t.rollSize/2),this.ctx.lineTo(0,t.rollSize),this.ctx.stroke(),this.ctx.rotate(360/6*Math.PI/180),this.ctx.closePath();this.ctx.restore()},e.prototype.drawWindmill=function(){var t=this.options;this.ctx.save();for(var i=0;i<t.windmills.length;i++)this.ctx.beginPath(),this.ctx.fillStyle=t.windmills[i],this.ctx.arc(-t.rollSize/2,0,t.rollSize,0,Math.PI),this.ctx.fill(),this.ctx.closePath(),this.ctx.rotate(360/4*Math.PI/180);this.ctx.beginPath(),this.ctx.fillStyle=t.windmillPointColor,this.ctx.arc(0,0,t.rollSize/2,0,Math.PI*2),this.ctx.fill(),this.ctx.restore()},e.prototype.drawChild=function(){var t=this,i=this.options;i.showChild&&this.Roll.child.forEach(function(n,s){t.ctx.save(),t.ctx.translate(-n.x,0),t.ctx.globalAlpha=(s+1)/10,t.ctx.rotate(n.turn*Math.PI/180),t.selectChart(),t.ctx.restore()})},e.prototype.drawGround=function(){var t=this.options;t.chart===S.WHEEL&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.lineWidth=3,this.ctx.globalAlpha=.03,this.ctx.moveTo(-(t.childNum/2)*(t.rollSize+t.rollGap/1.6),t.rollSize+3),this.ctx.lineTo(t.childNum/2*(t.rollSize+t.rollGap)+t.rollGap/2,t.rollSize+3),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore())},e.prototype.setShadow=function(){var t=this.options;this.ctx.shadowOffsetX=t.shadowOffsetX,this.ctx.shadowOffsetY=t.shadowOffsetY,this.ctx.shadowBlur=t.shadowBlur},e}(u),ft={arcSize:8,arcGap:2,arcColors:["#ec7546","#8364a4","#ff6c6e","#5bc6ab"],action:P.COLLISION},pt=function(o){v(e,o);function e(t,i,n,s,r){var a=o.call(this,t,i,n,s,r,ft)||this,h=a.options,l=h.arcSize*2+h.arcGap;return a.collisionPoint=[{key:0,state:!1,y:-l,x:0},{key:1,state:!1,y:l,x:0},{key:2,state:!1,y:0,x:l},{key:3,state:!1,y:0,x:-l}],a.turn=0,a.run(a.draw),a}return e.prototype.draw=function(){this.clearRect(),this.ctx.save();var t=this.options;t.action===P.COLLISION?this.controller():t.action===P.ROTATE&&(this.ctx.rotate(this.turn*Math.PI/180),this.turn+=10),this.drawCircular(),this.ctx.restore(),this.drawText({esGap:t.arcSize*4+t.arcGap*2})},e.prototype.controller=function(){var t=this.options;this.collisionPoint.forEach(function(i){var n="y";switch(i.key){case 0:n="y";break;case 1:n="y";break;case 2:n="x";break;case 3:n="x";break}var s=t.arcSize*2+t.arcGap;i[n]===-s&&(i.state=!0),i[n]===s&&(i.state=!1),i.state?i[n]++:i[n]--})},e.prototype.drawCircular=function(){var t=this,i=this.options;this.collisionPoint.forEach(function(n,s){if(t.ctx.save(),t.ctx.beginPath(),i.arcColors[s]){var r=i.arcColors[s];t.setShadow(r),t.ctx.fillStyle=r}t.ctx.arc(n.x,n.y,i.arcSize,0,Math.PI*2),t.ctx.fill(),t.ctx.closePath(),t.ctx.restore()})},e.prototype.setShadow=function(t){var i=this.options;t&&(this.ctx.shadowColor=t),this.ctx.shadowOffsetX=i.shadowOffsetX,this.ctx.shadowOffsetY=i.shadowOffsetY,this.ctx.shadowBlur=i.shadowBlur},e}(u),ut={src:"https://tommyrunner.github.io/web-loading/images/logo.png",width:52,height:52,turn:!0},xt=function(o){v(e,o);function e(t,i,n,s,r){var a=o.call(this,t,i,n,s,r,ut)||this;return a.img=new Image,a.img.src=a.options.src,a.turn=10,a.img.onload=function(){a.run(a.draw)},a}return e.prototype.draw=function(){this.clearRect(),this.drawImg();var t=this.options;this.drawText({esGap:t.height/2})},e.prototype.drawImg=function(){var t=this.options;this.ctx.save(),t.turn&&this.ctx.rotate(this.turn*Math.PI/180),this.ctx.drawImage(this.img,-t.width/2,-t.height/2,t.width,t.height),this.ctx.closePath(),this.ctx.restore(),this.turn+=10},e}(u),wt={skeletonColor:"rgb(240, 240, 240)",skeletonAnimationColor:"rgb(226, 226, 226)",radius:5,animation:!0,deep:!0,appointElementClass:[]},vt=function(o){v(e,o);function e(t,i,n,s,r){var a=o.call(this,t,i,n,s,r,wt,[],function(h){var l=h.options;h.ctx.translate(-h.w/2,-h.h/2),h.canvas.width=h.element.scrollWidth,h.canvas.height=h.element.scrollHeight,h.ctx.fillStyle=l.skeletonColor})||this;return a.skeleton=[],a.colorFlow=0,a.state=1,a.controller(a.element.children),a.run(a.draw),a}return e.prototype.draw=function(){this.clearRect(),this.drawSkeleton()},e.prototype.addElementToSkeleton=function(t){var i=this.options,n=i.appointElementClass;n&&n.length>0?n.some(function(s){return t.classList.contains(s)})&&this.skeleton.push({title:t.nodeName,element:t}):this.skeleton.push({title:t.nodeName,element:t})},e.prototype.controller=function(t){for(var i=this.options,n=0,s=Array.from(t);n<s.length;n++){var r=s[n];this.canvas!==r&&(i.deep?r.children.length<=0?this.addElementToSkeleton(r):(i.appointElementClass&&i.appointElementClass.length&&this.addElementToSkeleton(r),this.controller(r.children)):this.addElementToSkeleton(r))}},e.prototype.drawSkeleton=function(){var t=this,i=this.options,n=this.ctx.createLinearGradient(0,0,this.w,this.h);n.addColorStop(0,i.skeletonColor),n.addColorStop(this.colorFlow,i.skeletonAnimationColor),n.addColorStop(1,i.skeletonColor),i.animation&&(this.ctx.fillStyle=n),this.skeleton.forEach(function(s){var r=s.element;t.drawRadiusRect(r.offsetLeft,r.offsetTop,r.offsetWidth,r.offsetHeight,i.radius),t.ctx.fill()}),i.animation&&(this.colorFlow>=.9&&(this.state=2),this.colorFlow<=.1&&(this.state=1),this.state===1&&(this.colorFlow+=.06),this.state===2&&(this.colorFlow-=.06))},e}(u),mt={Gear:Z,Zoom:V,Ring:Q,Bean:et,Clock:st,Pattern:ht,Roll:dt,Circular:pt,Img:xt,Skeleton:vt};function W(o,e,t,i,n){try{var s=n.$store.model;if(s)s.initContextCall(s.modelDefOptions,s.limits,s.modelDefCall);else{var r=null;i.custom?r=new i.custom(o,e,t,i,n):r=new mt[i.model](o,e,t,i,n),s=r}}catch(a){C.error("draw error("+a+")")}}var B=window;function gt(o,e,t){o.$store={options:e,animationId:void 0,loadingId:null,model:null,hookCall:St(t)}}function D(){var o;return o={},o[w.BEFORE_CLOSE]=[],o[w.CLOSED]=[],o}function St(o){var e;return e={},e[w.BEFORE_CLOSE]=function(t){o[w.BEFORE_CLOSE].push(t)},e[w.CLOSED]=function(t){o[w.CLOSED].push(t)},e}function yt(){return{canvas:B.document.createElement("canvas"),hooks:D(),loadingId:X()}}function bt(){return{content:B.document.createElement("div"),loadingId:X()}}var M=window;function N(o,e,t,i){var n=e.pointerEvents?o.scrollWidth:o.clientWidth,s=e.pointerEvents?o.scrollHeight:o.clientHeight,r=M.getComputedStyle(o),a=o.style,h=i.style;return e.type===c.DOM&&!e.pointerEvents&&(o.style.pointerEvents="none"),(!r.position||r.position==="static")&&(a.position="relative"),i.id=t,h.opacity="0",h.position="absolute",h.left="".concat(e.pointerEvents?0:o.scrollLeft,"px"),h.top="".concat(e.pointerEvents?0:o.scrollTop,"px"),h.zIndex=e.zIndex,h.transition="".concat(e.delayInto/1e3,"s ease-in-out"),h.backgroundColor=e.bgColor,h.borderRadius=r.borderRadius,O(i)==="htmlcanvaselement"?j(i,n,s):O(i)==="htmldivelement"&&(h.width="".concat(n,"px"),h.height="".concat(s,"px"),h.display="flex",h.alignItems="center",h.justifyContent="center"),o.append(i),M.setTimeout(function(){return h.opacity="1"},0),F(o,function(){o.$store.loadingId=t}),o}function j(o,e,t){var i=M.devicePixelRatio||1;o.width=e*i,o.height=t*i,o.style.width="".concat(e,"px"),o.style.height="".concat(t,"px")}function Ct(o,e,t){t.style.opacity="0",e.type!==c.DOM&&(o.style.boxShadow="none")}var $=window,It=function(){function o(e){this.canvas=null,this.htmlElement=null,this.loadingId=null,this.element=null,this.hooks=null,this.resizeTimeId=null,this.options=Object.assign(b(),e)}return o.prototype.resize=function(e,t){var i=this;this.resizeTimeId||(this.resizeTimeId=$.setTimeout(function(){var n=t,s=e.clientWidth,r=e.clientHeight;n.width>e.clientWidth&&(s=e.offsetWidth,r=e.offsetHeight),i.canvas?(j(n,s,r),e.$store&&W(s,r,n,i.options,e)):i.htmlElement&&(i.htmlElement.style.width="".concat(s,"px"),i.htmlElement.style.height="".concat(r,"px")),i.resizeTimeId=null},this.options.delayInto))},o.prototype.close=function(e,t){var i=this,n=this.options,s=e.$store;$.setTimeout(function(){Ct(e,n,t),n.type===c.DOM&&!n.pointerEvents&&(e.style.pointerEvents="auto"),F(e,function(){s&&(s.model=null,i.callEvent(w.BEFORE_CLOSE),s.animationId&&H(s.animationId)),n.type!==c.DOM?e.remove():t.remove(),i.loadingId=null,i.callEvent(w.CLOSED),i.hooks=D()})},s.loadingId?0:n.delayInto)},o.prototype.draw=function(e){var t=this.options;if(t.html){var i=bt(),n=i.content,s=i.loadingId;this.htmlElement=n,this.htmlElement.innerHTML=t.html,this.loadingId=s,this.element=N(e,t,s,n)}else{var r=yt(),a=r.canvas,h=r.hooks,s=r.loadingId;this.canvas=a,this.hooks=h,this.loadingId=s,gt(e,t,h),this.element=N(e,t,s,a),e.$store?W(a.offsetWidth,a.offsetHeight,a,this.options,e):C.error("WebLoading:canvas or ctx null")}},o.prototype.callEvent=function(e){this.hooks&&this.hooks[e].forEach(function(t){t()})},o}(),A=window,kt=function(){function o(e){this.options=e,this.extendEl=this.initStyle()}return o.prototype.initStyle=function(){this.extendEl=A.document.createElement("div");var e=this.options,t="100vw",i="100vh",n="0px";return e&&(this.extendEl.classList.add("wl_"+(e.extendClass||"loading")),e.type===c.MINI&&(t="180px",i="160px",n="10px"),this.extendEl.style.cssText=`
          position:fixed;
          width:`.concat(t,`;
          height:`).concat(i,`;
          top:50%;
          left:50%;
          transform:translate(-50%, -50%);
          border-radius: `).concat(n,`;
          z-index: `).concat(e.zIndex,`;
          box-shadow:
          2.8px 2.8px 2.2px rgba(0, 0, 0, 0.02),
          6.7px 6.7px 5.3px rgba(0, 0, 0, 0.028),
          12.5px 12.5px 10px rgba(0, 0, 0, 0.035),
          22.3px 22.3px 17.9px rgba(0, 0, 0, 0.042),
          41.8px 41.8px 33.4px rgba(0, 0, 0, 0.05),
          100px 100px 80px rgba(0, 0, 0, 0.07)
          ;
      `)),A.document.body.appendChild(this.extendEl),this.extendEl},o.prototype.getElement=function(){return this.extendEl},o}(),Pt=window;function U(o){var e=new It(o),t=null,i=function(){l("resize")},n=function(x,d){var m=Object.assign(e.options,d);if(!e.loadingId&&!t)if(m.type!==c.DOM&&(x=new kt(m).getElement()),!x)C.error("The loading function cannot find an HTMLElement element!");else{var I=new Promise(function(k){Pt.setTimeout(function(){k(!0)},m.notFeel)}),_=new Promise(function(k){t=k});Promise.race([I,_]).then(function(k){k?e.draw(x):m.type!==c.DOM&&x.remove(),t=null})}},s=function(x){var d=e.canvas,m=Object.assign(e.options,x),I=e.element;d&&m&&I&&I.$store&&W(d.offsetWidth,d.offsetHeight,d,m,I)},r=function(){t&&t(!1),l("close")},a=function(){return e.loadingId},h=function(){return e.options};function l(x){if(e.element){var d=e.canvas;e.htmlElement&&(d=e.htmlElement),d?e[x](e.element,d):C.warn("Animation element not found!")}}return{loading:n,resize:i,close:r,update:s,getOptions:h,getLoadingId:a}}function R(o,e){return U(Object.assign(b(),e||{},{type:o}))}function Rt(o){return R(c.FULL,o)}function zt(o){return R(c.MINI,o)}var z=window;z.BaseModel=u;z.initLoading=function(o){return U(o)};z.miniLoading=function(o){return R(c.MINI,o)};z.fullLoading=function(o){return R(c.FULL,o)};export{u as BaseModel,P as CIRCULAR_ACTION,w as HOOKS_CALL_KEY,c as LOADING_TYPES,y as LOG_TYPES,E as MODEL_TYPES,p as PATTERN_CHART,S as ROLL_CHART,g as ZOOM_ACTION,Rt as fullLoading,U as initLoading,zt as miniLoading};
